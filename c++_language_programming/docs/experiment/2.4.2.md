# [<img style="width:40px;transform:rotate(180deg);" src="../../../assets/image/back.jpg"/>](../index.md) 实验四: 答辩记录表

|<center>日期</center>|学校|专业/班级|学生|指导老师|
|:--|:-:|:-:|:-:|:-:|
| - | - | - | - | - |
|**<center>课程设计题目</center>**||自助点餐系统|||
|**<center>答辩时间</center>**|| - |**答辩地点**| - |
|答辩记录: </br>问：对于菜单与订单信息怎么进行文件的保存与读取的？</br>答：由于菜品类没有使用指针或string等长度不确定的变量，也没有使用继承和多态的机制，因此由菜品类创建的不同对象其占用的空间是确定的。对于确认空间的菜品对象，在保存时通过循环将菜单管理类对象中的菜品对象以二进制的方式存入文件MyMenu.dat，在读取时通过循环以二进制的方式依次将文件中的菜品对象读出并放入菜单管理类对象中；对于使用了指针，也使用了继承和多态的订单类及其派生类，因此这些类产生的对象占用的空间是不确定的，因此使用一个gettype()虚函数获取当前订单对象属于什么类，在根据具体类中具体属性及其长度以二进制的方式存入文件，另外由于一个订单条目的数量是不确定的，因此在保存订单条目之前会先用一个字节存储订单对象的订单条目数量。由此解决了长度不定和虚函数列表的文件读写问题。</br></br>问：在课设中除了完成指定的任务外有什么新意？</br>答：对于一些常用的方法，如求两数最大公因数、输出缓存内容、去除输入字符串前后的空格等功能分别包装成了特定的函数，只要调用相关的声明文件就可以在其他工程中使用这些文件；另外，对于菜单文件MyMenu.dat文件在保存的时候，设计了备份机制，即进行判断是否已存在MyMenu.dat文件，若存在则调用mytool文件中的文件拷贝函数，将MyMenu.dat文件中的内容拷贝到MyMenu.dat.bak备份文件中，在菜单读取的时候，若MyMenu.dat文件损坏，也会判断MyMenu.dat.bak备份文件是否存在，若存在则进行备份数据还原；在用户开始选则菜品的时候，会根据当时的年月日时分秒毫秒自动生成订单的ID，从而将其作为订单的唯一标识。</br></br>问：感觉自己的系统有什么不足？</br>答：感觉一点不足是，由于时间不充裕，仅实现了命令行模式的系统交互，没有实现对用户更加直观的界面交互模式；另一点不足是，为了存储方便，将string类型替换成了char\[\]类型，导致类中属性的长度有上限，而且当直接通过源代码更改这些属性的上限后，在文件读写的过程中，会由于存储字段与读取字段不同而出错。对于前者的问题，会在课后用更充裕的时间学习c++的界面交互，比如MFC或Win32API等；后者的问题可以使用将属性从char\[\]换回string，并其在存储string类型的属性前均用一个至两个字节标记该属性的字符串长度。|||||
